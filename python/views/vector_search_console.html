{% extends "layout.html" %}
{% block title %} Vector Search Console {% endblock %}

{% block content %}
<div class="container">
  <h5>Vector Search Console</h5>
  <p></p>

<form method="post" id="form" name="form">
  <div class="row  align-items-center">
    <div class="col-6">
      <input type="text" class="form-control" id="search_text" name="search_text" value='{{ search_text }}' /> 
    </div>
    <div class="col-2">
      <span>
        <label for="search_button" class="form-label"></label>
        <button id="search_button" name="search_button" type="submit" class="btn btn-outline-primary">Search</button>
      </span>
    </div>
  </div>
  <p class="text-danger fw-bold" id="error_message" name="error_message"></p>
</form>
</div>

<hr>

<div class="container" id="results_div" name="results_div">
  <h5>{{ results_message }}</h5>
  <pre>
  <code>
{{ results }}
  </code>
  </pre>
</div>

<hr>

<div class="container" id="embedding_div" name="embedding_div">
  <h5>{{ embedding_message }}</h5>
  <pre>
  <code>
{{ embedding }}
  </code>
  </pre>
</div>


{% endblock %}

{% block js %}
<script>
const form = document.getElementById("form");
const search_button = document.getElementById("search_button");

search_button.addEventListener('click', 
    function(event) {
      event.preventDefault();
      search_button.disabled = true;
      search_button.textContent = "Processing...";
      form.submit();
    }
);
</script>
{% endblock %}
